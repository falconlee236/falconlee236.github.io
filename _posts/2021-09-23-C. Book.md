---
layout: post
title:  "C. Book"
---

# Welcome

**Hello world**, this is my first Jekyll blog post.

I hope you like it!

Time : 00:18

```cpp
#include <iostream>
#include <vector>
#include <set>
using namespace std;

int main(){
    ios_base::sync_with_stdio(false); cin.tie(0); cout.tie(0);
    int t; cin >> t;
    while(t--){
        int n; cin >> n;
        vector<vector<int>> g(n + 1);
        vector<int> cnt(n + 1);
        set<int> s;
        for(int i = 1; i <= n; i++){
            int num; cin >> num;
            if(!num) s.insert(i);
            cnt[i] = num;
            while(num--){
                int pre; cin >> pre;
                g[pre].push_back(i);
            }
        }
        int total = n;
        int page = 1;
        int ans = 1;
        while(total > 0){
            if(s.size() == 0){
                ans = -1;
                break;
            }
            auto it = s.lower_bound(page);
            if(it == s.end()){
                page = 1;
                ans++;
            }else{
                int p = *it;
                s.erase(it);
                for(int i = 0; i < g[p].size(); i++){
                    int next = g[p][i];
                    cnt[next]--;
                    if(!cnt[next]) s.insert(next);
                }
                total--;
                page = p;
            }
        }
        cout << ans << "\n";
    }
}
```
